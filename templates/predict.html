{% extends "base.html" %}

{% block title %}Disease Prediction - MedPro{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-brain me-2"></i>AI Disease Prediction
                    </h3>
                    <p class="mb-0 mt-2">Select your symptoms and get AI-powered disease predictions</p>
                </div>
                <div class="card-body p-4">
                    {% if prediction %}
                        <!-- Results Section -->
                        <div class="alert alert-info">
                            <h5 class="alert-heading">
                                <i class="fas fa-stethoscope me-2"></i>Prediction Results
                            </h5>
                            <hr>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Predicted Disease:</strong></p>
                                    <h4 class="text-primary">{{ prediction }}</h4>
                                </div>
                                {% if confidence %}
                                <div class="col-md-6">
                                    <p><strong>Confidence Level:</strong></p>
                                    <div class="progress mb-2">
                                        <div class="progress-bar bg-success" role="progressbar" 
                                             style="width: {{ confidence }}%" 
                                             aria-valuenow="{{ confidence }}" 
                                             aria-valuemin="0" 
                                             aria-valuemax="100">
                                            {{ confidence | round(1) }}%
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                            
                            {% if selected_symptoms %}
                            <div class="mt-3">
                                <p><strong>Selected Symptoms:</strong></p>
                                <div class="d-flex flex-wrap gap-2">
                                    {% for symptom in selected_symptoms %}
                                        <span class="badge bg-secondary">{{ symptom.replace('_', ' ').title() }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endif %}
                            
                            <div class="mt-4">
                                <a href="{{ url_for('predict') }}" class="btn btn-primary">
                                    <i class="fas fa-redo me-2"></i>Make Another Prediction
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <!-- Prediction Form -->
                        <form method="POST">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom1" class="form-label">Symptom 1</label>
                                        <select class="form-select" id="symptom1" name="symptom1">
                                            <option value="">Select a symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom2" class="form-label">Symptom 2</label>
                                        <select class="form-select" id="symptom2" name="symptom2">
                                            <option value="">Select a symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom3" class="form-label">Symptom 3</label>
                                        <select class="form-select" id="symptom3" name="symptom3">
                                            <option value="">Select a symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom4" class="form-label">Symptom 4</label>
                                        <select class="form-select" id="symptom4" name="symptom4">
                                            <option value="">Select a symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-4">
                                        <label for="symptom5" class="form-label">Symptom 5</label>
                                        <select class="form-select" id="symptom5" name="symptom5">
                                            <option value="">Select a symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-search me-2"></i>Predict Disease
                                </button>
                            </div>
                        </form>
                        
                        <!-- Information Section -->
                        <div class="mt-4 p-3 bg-light rounded">
                            <h6><i class="fas fa-info-circle me-2"></i>How it works:</h6>
                            <ul class="mb-0">
                                <li>Select up to 5 symptoms you're experiencing</li>
                                <li>Our AI model analyzes the symptom combination</li>
                                <li>Get instant disease predictions with confidence levels</li>
                                <li>Results are based on extensive medical data analysis</li>
                            </ul>
                        </div>
                        
                        <!-- Disclaimer -->
                        <div class="mt-3 p-3 bg-warning bg-opacity-10 rounded">
                            <small class="text-muted">
                                <i class="fas fa-exclamation-triangle me-1"></i>
                                <strong>Disclaimer:</strong> This tool is for informational purposes only and should not replace professional medical advice. 
                                Always consult with a healthcare provider for proper diagnosis and treatment.
                            </small>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Auto-fill symptom fields for testing (remove in production)
document.addEventListener('DOMContentLoaded', function() {
    // You can add any JavaScript functionality here
    console.log('Disease prediction page loaded');
});
</script>
{% endblock %}
