{% extends "base.html" %}

{% block title %}Symptom Checker - MedPro{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow">
                <div class="card-header bg-info text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-stethoscope me-2"></i>Free Symptom Checker
                    </h3>
                    <p class="mb-0 mt-2">Get instant AI-powered health insights - No registration required!</p>
                </div>
                <div class="card-body p-4">
                    {% if prediction %}
                        <!-- Results Section -->
                        <div class="alert alert-success">
                            <h5 class="alert-heading">
                                <i class="fas fa-heartbeat me-2"></i>Health Analysis Results
                            </h5>
                            <hr>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Possible Condition:</strong></p>
                                    <h4 class="text-primary">{{ prediction }}</h4>
                                </div>
                                {% if confidence %}
                                <div class="col-md-6">
                                    <p><strong>Confidence Level:</strong></p>
                                    <div class="progress mb-2">
                                        <div class="progress-bar bg-success" role="progressbar" 
                                             style="width: {{ confidence }}%" 
                                             aria-valuenow="{{ confidence }}" 
                                             aria-valuemin="0" 
                                             aria-valuemax="100">
                                            {{ confidence | round(1) }}%
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                            
                            {% if selected_symptoms %}
                            <div class="mt-3">
                                <p><strong>Your Symptoms:</strong></p>
                                <div class="d-flex flex-wrap gap-2">
                                    {% for symptom in selected_symptoms %}
                                        <span class="badge bg-info">{{ symptom.replace('_', ' ').title() }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endif %}
                            
                            <div class="mt-4">
                                <a href="{{ url_for('public_symptom_checker') }}" class="btn btn-info">
                                    <i class="fas fa-redo me-2"></i>Check More Symptoms
                                </a>
                                <a href="{{ url_for('appointment') }}" class="btn btn-success ms-2">
                                    <i class="fas fa-calendar-plus me-2"></i>Book Appointment
                                </a>
                            </div>
                        </div>
                        
                        <!-- Call to Action for Registration -->
                        <div class="alert alert-warning">
                            <h6><i class="fas fa-user-plus me-2"></i>Want More Features?</h6>
                            <p class="mb-2">Create a free account to access:</p>
                            <ul class="mb-3">
                                <li>Save your symptom history</li>
                                <li>Book appointments online</li>
                                <li>Upload and manage medical files</li>
                                <li>Track your health over time</li>
                            </ul>
                            <a href="{{ url_for('signup') }}" class="btn btn-warning">
                                <i class="fas fa-user-plus me-2"></i>Create Free Account
                            </a>
                            <a href="{{ url_for('login') }}" class="btn btn-outline-warning ms-2">
                                <i class="fas fa-sign-in-alt me-2"></i>Login
                            </a>
                        </div>
                    {% else %}
                        <!-- Prediction Form -->
                        <form method="POST">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom1" class="form-label">Primary Symptom</label>
                                        <select class="form-select" id="symptom1" name="symptom1">
                                            <option value="">Select your main symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom2" class="form-label">Secondary Symptom</label>
                                        <select class="form-select" id="symptom2" name="symptom2">
                                            <option value="">Select additional symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom3" class="form-label">Third Symptom</label>
                                        <select class="form-select" id="symptom3" name="symptom3">
                                            <option value="">Select another symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="symptom4" class="form-label">Fourth Symptom</label>
                                        <select class="form-select" id="symptom4" name="symptom4">
                                            <option value="">Select another symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-4">
                                        <label for="symptom5" class="form-label">Fifth Symptom</label>
                                        <select class="form-select" id="symptom5" name="symptom5">
                                            <option value="">Select another symptom</option>
                                            {% for symptom in symptoms %}
                                                <option value="{{ symptom }}">{{ symptom.replace('_', ' ').title() }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-info btn-lg">
                                    <i class="fas fa-search me-2"></i>Analyze My Symptoms
                                </button>
                            </div>
                        </form>
                        
                        <!-- Information Section -->
                        <div class="mt-4 p-3 bg-light rounded">
                            <h6><i class="fas fa-info-circle me-2"></i>How our Symptom Checker works:</h6>
                            <ul class="mb-0">
                                <li>Select up to 5 symptoms you're experiencing</li>
                                <li>Our advanced AI analyzes symptom combinations</li>
                                <li>Get instant health insights with confidence levels</li>
                                <li>Results based on extensive medical research data</li>
                            </ul>
                        </div>
                        
                        <!-- Benefits Section -->
                        <div class="mt-3 p-3 bg-primary bg-opacity-10 rounded">
                            <h6><i class="fas fa-star me-2"></i>Why use MedPro Symptom Checker?</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="mb-0">
                                        <li><i class="fas fa-check text-success me-2"></i>100% Free to use</li>
                                        <li><i class="fas fa-check text-success me-2"></i>No registration required</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Instant results</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="mb-0">
                                        <li><i class="fas fa-check text-success me-2"></i>AI-powered analysis</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Privacy protected</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Professional insights</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Call to Action -->
                        <div class="mt-3 p-3 bg-success bg-opacity-10 rounded text-center">
                            <h6><i class="fas fa-heart me-2"></i>Ready for More?</h6>
                            <p class="mb-3">Create a free account to unlock additional features and track your health journey!</p>
                            <a href="{{ url_for('signup') }}" class="btn btn-success">
                                <i class="fas fa-user-plus me-2"></i>Create Free Account
                            </a>
                            <a href="{{ url_for('login') }}" class="btn btn-outline-success ms-2">
                                <i class="fas fa-sign-in-alt me-2"></i>Login
                            </a>
                        </div>
                        
                        <!-- Disclaimer -->
                        <div class="mt-3 p-3 bg-warning bg-opacity-10 rounded">
                            <small class="text-muted">
                                <i class="fas fa-exclamation-triangle me-1"></i>
                                <strong>Important Disclaimer:</strong> This symptom checker is for informational purposes only and should not replace professional medical advice, diagnosis, or treatment. 
                                Always consult with a qualified healthcare provider for proper medical care. In case of emergency, call your local emergency services immediately.
                            </small>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add some interactivity to the symptom checker
    const symptomSelects = document.querySelectorAll('select[name^="symptom"]');
    
    symptomSelects.forEach((select, index) => {
        select.addEventListener('change', function() {
            if (this.value) {
                // Add visual feedback when a symptom is selected
                this.classList.add('border-success');
            } else {
                this.classList.remove('border-success');
            }
        });
    });
    
    console.log('Public symptom checker loaded');
});
</script>
{% endblock %}
